#include <stdio.h>
#include <stdlib.h>

typedef struct node
{
    int data;
    struct node *next, *prev;
} node;

int main()
{
    int i, pos, ch, n, val;
    node *p, *z, *c, *head = NULL;
    printf("Enter the no. of nodes : ");
    scanf("%d", &n);

    for (i = 0; i < n; i++)
    {
        p = (node *)malloc(sizeof(node));
        printf("Enter the value for new node : ");
        scanf("%d", &p->data);
        if (head == NULL)
        {
            head = p;
            p->next = NULL;
            p->prev = NULL;
        }
        else
        {
            p->next = NULL;
            p->prev = z;
            z->next = p;
        }
        z = p;
    }
    printf("Elements of DLL are : \n");
    p = head;
    while (p != NULL)
    {
        printf("%d\t", p->data);
        p = p->next;
    }

    printf("\nEnter the Insertion position : ");
    scanf("%d", &pos);
    p = (node *)malloc(sizeof(node));
    printf("Enter the data for new node : ");
    scanf("%d", &p->data);
    if (pos < 1 || pos > n + 1)
    {
        printf("Invalid position for insertion.\n");
        exit(1);
    }
    else
    {

        if (pos == 1)
        {
            head->prev = p;
            p->next = head;
            p->prev = NULL;
            head = p;
        }
        else if (pos == n)
        {
            z = head;
            while (z->next != NULL)
            { // 'z' now points to the last node by USING ( z->next!=NULL )
                printf("%d\t", z->data);
                z = z->next;
            }
            z->next = p;
            p->prev = z;
            p->next = NULL; 
        }
        else
        {
            i = 1;
            z = head;
            while (i < pos - 1)
            {
                // printf("%d\t", z->data);
                z = z->next;
                i++;
            }
            c = z->next;

            z->next = p;
            p->prev = z;
            p->next = c;
            c->prev = p;
        }

        printf("\nAfter insertion , Elements of DLL are : \n");
        p = head;
        while (p != NULL)
        {
            printf("%d\t", p->data);
            p = p->next;
        }
    }

    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************
    //********************************************************************************************************

    // printf("\nInsertion at 1st position(1) : ");
    // scanf("%d", &ch);
    if (ch == 1)
    {
        p = (node *)malloc(sizeof(node));
        printf("Enter the value for insertion : ");
        scanf("%d", &p->data);
        head->prev = p;
        p->next = head;
        p->prev = NULL;
        head = p;

        printf("After insertion , Elements of DLL are : \n");
        p = head;
        while (p != NULL)
        {
            printf("%d\t", p->data);
            p = p->next;
        }
    }

    // printf("\nInsertion at last position(9) : ");
    // scanf("%d", &ch);
    if (ch == 9)
    {
        p = (node *)malloc(sizeof(node));
        printf("Enter the data for last node : ");
        scanf("%d", &p->data);

        z = head;
        while (z->next != NULL)
        { // 'z' now points to the last node by USING ( z->next!=NULL )
            printf("%d\t", z->data);
            z = z->next;
        }
        z->next = p;
        p->prev = z;
        p->next = NULL;

        printf("\nAfter insertion , Elements of DLL are : \n");
        c = head;
        while (c != NULL)
        {
            printf("%d\t", c->data);
            c = c->next;
        }
    }
    // printf("\nInsertion at 2nd position(2) : ");
    // scanf("%d", &ch);
    if (ch == 2)
    {
        p = (node *)malloc(sizeof(node));
        printf("Enter the data for last node : ");
        scanf("%d", &p->data);
        pos = 2;
        i = 1;
        z = head;
        while (i < pos)
        {
            z = z->next;
            i++;
        }
        head->next = p;
        p->prev = head;
        p->next = z;
        z->prev = p;
        printf("\nAfter insertion , Elements of DLL are : \n");
        c = head;
        while (c != NULL)
        {
            printf("%d\t", c->data);
            c = c->next;
        }
    }

    return 0;
}